<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My LIFF App</title>
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <style>
        body { font-family: sans-serif; text-align: center; padding: 20px; }
        img { border-radius: 50%; width: 100px; margin-bottom: 10px; }
        button { 
            display: block; width: 100%; padding: 15px; margin: 10px 0; 
            border: none; border-radius: 8px; color: white; font-weight: bold; cursor: pointer;
        }
        .btn-msg { background-color: #28a745; }
        .btn-flex { background-color: #007bff; }
    </style>
</head>
<body>
    <img id="pictureUrl" src="" style="display:none;">
    <h1 id="displayName">กำลังโหลด...</h1>

    <button class="btn-msg" id="btnMsg">ส่งข้อความธรรมดา</button>
    <button class="btn-flex" id="btnFlex">ส่ง Flex Message</button>

    <script>
        async function main() {
            // *** อย่าลืมเปลี่ยนตรงนี้เป็น LIFF ID ของคุณ ***
            await liff.init({ liffId: "ใส่_LIFF_ID_ของคุณที่นี่" });

            if (liff.isLoggedIn()) {
                const profile = await liff.getProfile();
                document.getElementById("displayName").innerText = profile.displayName;
                document.getElementById("pictureUrl").src = profile.pictureUrl;
                document.getElementById("pictureUrl").style.display = "inline-block";
            } else {
                liff.login();
            }
        }

        // ฟังก์ชันส่งข้อความธรรมดา
        document.getElementById("btnMsg").onclick = async function() {
            if (liff.isInClient()) {
                await liff.sendMessages([{ type: 'text', text: 'ทักทายตอนเช้าครับ!' }]);
                liff.closeWindow();
            }
        }

        // ฟังก์ชันส่ง Flex Message
        document.getElementById("btnFlex").onclick = async function() {
            if (liff.isInClient()) {
                await liff.sendMessages([{
                    "type": "flex",
                    "altText": "คุณได้รับบัตรทักทาย",
                    "contents": {{
  "type": "bubble",
  "hero": {
    "type": "image",
    "url": "https://developers-resource.landpress.line.me/fx/img/01_1_cafe.png",
    "size": "full",
    "aspectRatio": "20:13",
    "aspectMode": "cover",
    "action": {
      "type": "uri",
      "uri": "https://line.me/"
    }
  },
  "body": {
    "type": "box",
    "layout": "vertical",
    "contents": [
      {
        "type": "text",
        "text": "Brown Cafe",
        "weight": "bold",
        "size": "xl"
      },
      {
        "type": "box",
        "layout": "baseline",
        "margin": "md",
        "contents": [
          {
            "type": "icon",
            "size": "sm",
            "url": "https://developers-resource.landpress.line.me/fx/img/review_gold_star_28.png"
          },
          {
            "type": "icon",
            "size": "sm",
            "url": "https://developers-resource.landpress.line.me/fx/img/review_gold_star_28.png"
          },
          {
            "type": "icon",
            "size": "sm",
            "url": "https://developers-resource.landpress.line.me/fx/img/review_gold_star_28.png"
          },
          {
            "type": "icon",
            "size": "sm",
            "url": "https://developers-resource.landpress.line.me/fx/img/review_gold_star_28.png"
          },
          {
            "type": "icon",
            "size": "sm",
            "url": "https://developers-resource.landpress.line.me/fx/img/review_gray_star_28.png"
          },
          {
            "type": "text",
            "text": "4.0",
            "size": "sm",
            "color": "#999999",
            "margin": "md",
            "flex": 0
          }
        ]
      },
      {
        "type": "box",
        "layout": "vertical",
        "margin": "lg",
        "spacing": "sm",
        "contents": [
          {
            "type": "box",
            "layout": "baseline",
            "spacing": "sm",
            "contents": [
              {
                "type": "text",
                "text": "Place",
                "color": "#aaaaaa",
                "size": "sm",
                "flex": 1
              },
              {
                "type": "text",
                "text": "Flex Tower, 7-7-4 Midori-ku, Tokyo",
                "wrap": true,
                "color": "#666666",
                "size": "sm",
                "flex": 5
              }
            ]
          },
          {
            "type": "box",
            "layout": "baseline",
            "spacing": "sm",
            "contents": [
              {
                "type": "text",
                "text": "Time",
                "color": "#aaaaaa",
                "size": "sm",
                "flex": 1
              },
              {
                "type": "text",
                "text": "10:00 - 23:00",
                "wrap": true,
                "color": "#666666",
                "size": "sm",
                "flex": 5
              }
            ]
          }
        ]
      }
    ]
  },
  "footer": {
    "type": "box",
    "layout": "vertical",
    "spacing": "sm",
    "contents": [
      {
        "type": "button",
        "style": "link",
        "height": "sm",
        "action": {
          "type": "uri",
          "label": "CALL",
          "uri": "https://line.me/"
        }
      },
      {
        "type": "button",
        "style": "link",
        "height": "sm",
        "action": {
          "type": "uri",
          "label": "WEBSITE",
          "uri": "https://line.me/"
        }
      },
      {
        "type": "box",
        "layout": "vertical",
        "contents": [],
        "margin": "sm"
      }
    ],
    "flex": 0
  }
}
                        "type": "bubble",
                        "body": {
                            "type": "box",
                            "layout": "vertical",
                            "contents": [
                                { "type": "text", "text": "Greeting Card", "weight": "bold", "color": "#1DB446", "size": "sm" },
                                { "type": "text", "text": "ยินดีที่ได้รู้จัก!", "weight": "bold", "size": "xl", "margin": "md" },
                                { "type": "text", "text": "ส่งจากระบบ LIFF ของฉันเอง", "size": "xs", "color": "#aaaaaa", "wrap": true }
                            ]
                        }
                    }
                }]);
                liff.closeWindow();
            }
        }
// มองหาฟังก์ชันตอนกดปุ่มใน index.html
document.getElementById("btnFlex").onclick = async function() {
    if (liff.isInClient()) {
        await liff.sendMessages([
            {
                "type": "flex",
                "altText": "ข้อความนี้จะโชว์ในการแจ้งเตือน",
                "contents": 
                // --- เริ่มวางโค้ดที่ก๊อปมาตรงนี้ ---
                {
                  "type": "bubble",
                  "body": {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      { "type": "text", "text": "ตัวอย่างจาก Simulator" }
                    ]
                  }
                }
                // --- สิ้นสุดการวางโค้ด ---
            }
        ]);
        liff.closeWindow(); // ส่งเสร็จให้ปิดหน้าจอ
    }
}
        main();
    </script>
</body>
</html>
